# Life Coach AI 故障排除指南

## 🔍 访问出错的解决方案

### 1. 快速测试当前状态

运行以下命令检查服务器状态：
```bash
cd "第四课-life coach"
curl http://localhost:3001/health
```

如果返回 `{"status":"ok"}`，说明服务器正常运行。

### 2. 启动服务器的方法

#### 方法一：使用快速启动脚本（推荐）
```bash
cd "第四课-life coach"
chmod +x quick-start.sh
./quick-start.sh
```

#### 方法二：使用模拟模式（如果 API 有问题）
```bash
cd "第四课-life coach"
MOCK_API=true npm start
```

#### 方法三：手动启动
```bash
cd "第四课-life coach"
npm install
npm start
```

### 3. 常见问题及解决方法

#### 问题1：端口被占用
**错误信息**：`EADDRINUSE: address already in use :::3001`

**解决方法**：
```bash
# 查找占用端口的进程
lsof -i :3001

# 终止进程（替换 PID）
kill -9 <PID>

# 或者修改端口号
export PORT=3002
npm start
```

#### 问题2：API 密钥无效
**错误信息**：`API 密钥无效或已过期`

**解决方法**：
1. 使用模拟模式测试界面：
   ```bash
   MOCK_API=true npm start
   ```

2. 更新 API 密钥：
   - 编辑 `server.js` 文件
   - 修改 `API_CONFIG.apiKey` 的值
   - 重启服务器

#### 问题3：无法访问页面
**现象**：浏览器显示"无法连接到此网站"

**解决方法**：
1. 确认服务器已启动并运行在正确端口
2. 检查防火墙设置
3. 尝试使用不同的浏览器
4. 清除浏览器缓存

#### 问题4：API 请求失败
**错误信息**：`API 请求失败 (404/500/等)`

**解决方法**：
1. 使用模拟模式：
   ```bash
   MOCK_API=true npm start
   ```

2. 检查网络连接
3. 验证火山方舟 API 配置
4. 查看服务器日志：
   ```bash
   tail -f server.log
   ```

### 4. 访问地址

服务器启动成功后，请访问：
- **主页**：http://localhost:3001
- **健康检查**：http://localhost:3001/health

### 5. 测试命令

#### 测试服务器连通性
```bash
curl http://localhost:3001/health
```

#### 测试 API 端点
```bash
curl -X POST http://localhost:3001/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"测试消息"}'
```

### 6. 日志查看

#### 实时查看服务器日志
```bash
tail -f server.log
```

#### 查看最近的日志
```bash
cat server.log | tail -20
```

### 7. 重置服务器

如果遇到无法解决的问题，可以完全重置：
```bash
cd "第四课-life coach"

# 停止所有相关进程
pkill -f "node server.js"

# 清理并重新安装依赖
rm -rf node_modules package-lock.json
npm install

# 重新启动
npm start
```

### 8. 联系支持

如果以上方法都无法解决问题，请提供以下信息：
1. 错误信息的完整截图或文本
2. 服务器日志的最后 20 行
3. 你使用的操作系统和浏览器
4. 你执行的具体操作步骤

---

## 🎯 快速开始建议

1. **首先使用模拟模式**确保界面正常工作：
   ```bash
   cd "第四课-life coach"
   MOCK_API=true npm start
   ```
   然后访问 http://localhost:3001

2. **界面正常后**，再配置真实的 API 密钥

3. **如果仍有问题**，请运行测试脚本：
   ```bash
   node test-server.js
   ```

这样可以逐步定位和解决问题！